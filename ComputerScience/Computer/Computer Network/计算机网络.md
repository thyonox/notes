# 计算机网络概述

# 什么是Internet（因特网/互联网）

在这门课程中使用公共互联网（公网）作为学习计算机网络和协议的载体。什么是Internet回答这个问题有两种方式：一是描述Internet的具体构成，即构成Internet的基本硬件和软件组件；二是根据为分布式应用提供服务的联网基础设施来描述Internet。

## 具体构成描述

Internet是个世界范围的计算机网络，即它是个互联了遍及全世界数十亿计算设备的网络。这些计算设备包括了传统的PC、Linux工作站以及服务器，也包括着非传统的智能手机、平板电脑、电视、游戏机等。

所有这些设备都称为**主机**（host）或**端系统** （end system）。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/ade06d55-640b-4bec-af9b-621f07d2f2c3/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_QC-tSIJmq1.png)

端系统通过**通信链路** （communication link）和**分组交换机**（packet switch）连接到一起，这些通信链路以不同的物理媒介组成，包括同轴电缆、铜线、光纤和无线电频谱。不同的链路能够以不同的速率传输数据，链路的**传输速率**（transmission rate）以比特/秒（bit/s，或bps）度量。当一台端系统要向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节由此形成的信息包用计算机网络的术语来说称为**分组**（packet）这些分组通过网络发送到目的端系统，在那里被装配成初始数据。

分组交换机从它的一条入通信链路接收到达的分组，并从它的一条出通信链路转发该分组。分组交换机中最著名的类型是**路由器**（router）和**链路层交换机**（link-layer switch）。链路层交换机通常用于接入网中，而路由器通常用于网络核心中。从发送端系统到接收端系统，一个分组所经历的一系列通信链路和分组交换机称为通过该网络的**路径**（route或path）。

分组的传输类似于将货物（数据）从工厂（发送端）使用卡车通过高速公路搬运到目标仓库（接收端）。货物搬运前要分开装上卡车（分组），每辆卡车独立通过高速公路（分组交换网络），路上要经历分岔路口（分组交换机），到达目的地之后将同一批货物堆放在一起（装配成初始数据）。

端系统通过**互联网服务提供商**（Internet Service Provider, ISP） 接人互联网，包括如本地电缆或电话公司那样的住宅区ISP、公司ISP、大学ISP，ISP 为端系统提供了各种不同类型的网络接入，包括如线缆调制解调器或 DSL 那样的住宅宽带接入、高速局域网接入和移动无线接入。

端系统分组交换机和其他互联网部件都要运行一系列**协议**（protocol），这些协议控制互联网中信息的接收和发送。**TCP** （Transmission Control Protocol，传输控制协议）和 **IP**（ Internet Protocol，网际协议）是互联网中两个最为重要的协议。IP 协议定义了在路由器和端系统之间发送和接收的分组格式。互联网的主要协议统称为TCP/IP。

## 服务描述

互联网应用多种多样，因为这些应用程序涉及多个相互交换数据的端系统，故它们被称为**分布式应用程序** （distributed application）。

与互联网相连的端系统提供了一个**套接字接口**（socket interface）, 该接口规定了运行在一个端系统上的程序请求互联网基础设施向运行在另一个端系统上的特定目的地程序交付数据的方式。

就像寄一封信件，中间的运输过程上面已经说过了，在寄信过程中，我们需要将信放入信封中，写上收件人的全名、地址和邮政编码，还要贴上邮票。

## 什么是协议

也许理解计算机网络协议这一概念的一个最容易办法是，先与某些人类活动进行类比。

人类协议要求一方首先进行问候，以开始与另一个人的通信，对“你好”的典型响应是返回个“你好”报文此人用一个热情的“你好”进行响应，隐含着一种指示，表明能够继续向那人询问时间了。对最初的“你好”的不同响应（例如“不要烦我 ”，或“我不会说英语”，或某些不合时宜的回答）也许表明了一个勉强的或不能进行的通信。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/a81961ab-4bbf-47c6-ba2f-1e6331b348d3/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_1SvLzsNTYQ.png)

显然，发送和接收的报文，以及这些报文发送和接收或其他事件出现时所采取的动作，这些在一个人类协议中起到了核心作用，如果人们使用不同的协议，这些协议就不能交互，因而不能完成有用的工作。

网络协议类似于人类协议，除了交换报文和采取动作的实体是某些设备的硬件或软件组件，在互联网中，涉及两个或多个远程通信实体的所有活动都受协议的制约。

**协议**（protocol） 定义了在两个或多个通信实体之间交换的报文的格式和顺序，以及报文发送和/或接收报文或其他事件所采取的动作。

总的来说，互联网包括组成骨干的节点与链路，以及各应用程序在互联网中数据传输或其它动作，所要遵守的规则，互联网也是一系列网络的合集通称，无数的局域网、城域网、广域网共同组成了庞大的互联网集群。

# 网络边缘

通常把与因特网相连的计算机和其他设备称为端系统，因为它们位于互联网的边缘， 故而被称为端系统。

端系统也称为主机（host），因为它们容纳（即运行）应用程序。主机有时又被进一步划分为两类 ：**客户**（client）和**服务器**（server）。

## 接入网

网络边缘的应用程序和端系统连接到互联网，需要经过接入网，是指将端系统物理连接到其**边缘路由器**（edge router）的网络，边缘路由器是端系统到任何其他远程端系统的路径上的第一台路由器。

### 家庭接入

1. **数字电话线**（Digital Subscriber Line，DSL）
    
    用户在本地电话公司处获得DSL互联网接入，DSL调制解调器将数字数据转为高频音，使用现有的电话线（双绞铜线）与位于电话公司的本地中心局（CO）中的数字用户线接入复用器（DSLAM）交换数据，模拟信号在DSLAM处被转换为数字信号。
    
    家庭电话线根据不同频率进行编码，所以可以同时承载数据和传统的电话信号：
    
    - 高速下行信道，位于 50kHz 1MHz 频段；
        
    - 中速上行信道，位于 4kHz 50kHz 频段；
        
    - 普通的双向电话信道，位千 4kHz 频段。 在用户侧，分配器将到达家庭的数据信号和电话信号分隔开，并将数据信号转发给DSL调制解调器；在中心局，DSLAM将数据和电话信号分隔开，并将数据送往互联网。
        
        ![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/c6c3913e-f736-4bed-9314-b488e3cc9f5a/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_nT0Wk0ItF-.png)
        
2. **电缆互联网接入**（cable Internet access）
    
    当家庭地址位于中心局超过10英里处，则必须采取其他形式的互联网接入。
    
    电缆互联网接入中使用了光纤和同轴电缆，所以被称为混合光纤同轴（Hybrid Fiber Coax , HFC）系统，电缆互联网接入需要电缆调制解调器（cable modem），通过一个以太网端口连接到家庭 PC。在电缆头端， 电缆调制解调器端接系统（Cable Modem Termination System, CMTS）DSL 网络DSLAM 具有类似的功能，即将来自许多下行家庭中的电缆调制解调器发送的模拟信号转换回数字形式。
    
    电缆因特网接入的一个重要特征是共享广播媒体，由头端发送的每个分组向下行信道经每段链路到每个家庭；每个家庭发送的每个分组经上行信道向头端传输。因为下行信道和上行信道共享，就会导致数据传输速率远低于理论速率，也可能会出现碰撞问题。
    
    ![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/473d802d-76c2-452e-8572-bb69c18af868/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_njD98_90Ze.png)
    
3. **光纤到户**（Fiber To The Home , ITTH）
    
    从本地中心局直接到家庭提供了一条光纤路径。
    
    最简单的光纤分布网络称为直接光纤，从本地中心局到每户设置一根光纤 更为一般的是，从中心局出来的每根光纤实际上由许多家庭共享，直到相对接近这些家庭的位置，该光纤才分成每户一根光纤。这种分配有两种光纤网络结构：主动光纤网络（Activ Optical Network，AON）和被动光纤网络 （Passive Optical Network，PON）。
    
    在PON结构中，每个家庭具有一个光纤网络端接器（Optical Network Terminator，ONT），它由专门的光纤连接到邻近的分配器（splitter）该分配器把一些家庭（通常少于100 个）集结到一根共享的光纤，该光纤再连接到本地电话和公司的中心局中的光纤线路端接器（Optical Line Terminator ，OLT）OLT 提供了光信号和电信号之间的转换，经过本地电话公司路由器与因特网相连。PON 体系结构中，所有从 OLT 发送到分配器的分组在分配器（类似于一个电缆头端）处复制。
    
    ![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/c7d803da-c1a2-446a-ab70-c8933fd4437f/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_mzKCQKjyAq.png)
    
4. 其它
    
    包括卫星链路
    

### 企业（家庭）接入

在公司和大学校园以及越来越多的家庭环境中，使用**局域网**（LAN）将端系统连接到边缘路由器。

局域网接入技术主要**以太网**技术和无线LAN（**WIFI**）方式。

以太网用户使用双绞铜线与一台以太网交换机相连，以太网交换机再与更大的互联网相连。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/7a5a8d9d-dcae-42c4-a7a4-1a3d8e9ea318/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_pmim7g94vJ.png)

更多无线LAN用户采用电缆互联网接入或DSL，搭配廉价的无线LAN技术，产生出强大的家用网络。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/18c65931-4847-4c76-8cbc-16460b8e2a0f/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_vMl6m1mzc7.png)

### 广域无线接入

主要是手机等移动设备的互联网接入方式，这些设备应用了与蜂窝移动电话相同的无线基础设施，通过蜂窝网提供商运营的基站来发送和接收分组。相比WIFI它的作用范围更广。这些方式包括3G（第三代无线技术）、4G和LTE。

## 物理媒体

在数据传输时，比特流从源到目的地，会经过一系列“发射器-接收器”对，跨越一种**物理媒介**（physical meclium）传播电磁波或光脉冲来发送该比特。

物理媒介包括：双绞铜线、同轴电缆、多模光纤缆、陆地无线电频谱和卫星无线电频谱。

物理媒体分成两种类型：导引型媒体（guided media）和非导引型媒体（unguided media）。导引型媒体电波会沿着固体媒介前行，如光缆、双绞铜线、同轴电缆；非导引型媒介电波则在空气或外层空间中传播，如无线局域网和数字卫星频道。

# 网络核心

网络核心即为连接互联网端系统的分组交换机和链路构成的网状网络。

## 分组交换

在各种网络应用中，端系统彼此交换**报文**（message），报文包含协议设计者所需要的任何东西，包含控制功能和数据。为了从源端系统向目的端系统发送一个报文，**源端系统将长报文划分为较小的数据块**，称之为分组。在源和目的地之间，每个分组都通过通信链路和分组交换机（路由器和链路层交换机）传送。

分组以等于该链路最大传输速率的速度传输通过通信链路。因此，如果某源端系统或分组交换机经过一条链路发送_**L**_比特的分组，链路的传输速率为_**R**_比特/秒，则传输该分组的时间为_**L/R**_秒。

### 存储转发传输

多数分组交换机在链路的输入端使用**存储转发传输**（store-and- forwd transmission）。是指交换机在向输出链路转发分组之前，必须接先收到整个分组。对于已经接受还不能传输的比特，会先缓存下来。

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/0536d6a3-c650-4e09-9e75-6d2605917d10/e0e0dace-2a3d-46b1-ba0c-82be17083663/EBoos4%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%92%8C%E4%BA%92%E8%81%94%E7%BD%91imageimage_LDggI4zypg.png)

### 排队时延和分组丢失

### 转发表和路由选择协议

## 电路交换

## 网络的网络

# 应用层

# 运输层

# 网络层

# 数据链路层

# 物理层

# 网络安全